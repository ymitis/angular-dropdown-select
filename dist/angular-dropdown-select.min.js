/**
 * @license MIT http://jseppi.mit-license.org/license.html
 */
"use strict";var dd=angular.module("bwDropdownSelect",[]);dd.directive("bwDropdownSelect",["bwDropdownService","$window",function(e,t){return{restrict:"A",replace:!0,scope:{selectOptions:"=",model:"=ngModel",onChange:"&"},controller:["$scope","$element","$attrs",function(l,i,n){function o(){for(var e=0;e<l.selectOptions.length;e++)if(l.selectOptions[e][l.keyField]==l.model)return l.selectOptions[e]}l.keyField=n.selectOptionKey||"id",l.labelField=n.selectOptionLabel||"text",l.orderByField=n.selectOrderBy||l.labelField,l.$watch("selectOptions",function(){var e=o();e&&e[l.labelField]&&(l.selectedLabel=e[l.labelField])}),e.register(i),this.select=function(e){if(e[l.keyField]!=l.model){l.model=e[l.keyField];var t=o();l.selectedLabel=t[l.labelField]}l.onChange({selected:e})};var c="ontouchstart"in t?"touchend":"click";i.bind(c,function(t){t.stopPropagation(),e.toggleActive(i)}),l.$on("$destroy",function(){e.unregister(i)})}],template:['<div class="wrap-dd-select">','<span class="selected">{{selectedLabel}}</span>','<ul class="dropdown">','<li ng-repeat="item in selectOptions | orderBy:orderByField"',' class="dropdown-item"'," bw-dropdown-select-item",' item ="item"',' item-key="keyField"',' item-label="labelField">',"</li>","</ul>","</div>"].join("")}}]),dd.directive("bwDropdownSelectItem",[function(){return{require:"^bwDropdownSelect",replace:!0,scope:{itemLabel:"=",itemKey:"=",item:"="},link:function(e,t,l,i){e.selectItem=function(){i.select(e.item)}},template:["<li>",'<a href="" class="dropdown-item"',' ng-click="selectItem()">',"{{item[itemLabel]}}","</a>","</li>"].join("")}}]),dd.factory("bwDropdownService",["$document",function(e){var t=e.find("body"),l={},i=[];return t.bind("click",function(){angular.forEach(i,function(e){e.removeClass("active")})}),l.register=function(e){i.push(e)},l.unregister=function(e){var t;t=i.indexOf(e),t>-1&&i.splice(t,1)},l.toggleActive=function(e){angular.forEach(i,function(t){t!==e&&t.removeClass("active")}),e.toggleClass("active")},l}]);